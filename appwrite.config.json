{
    "projectId": "mogemar",
    "projectName": "MogeMar",
    "settings": {
        "services": {
            "account": true,
            "avatars": true,
            "databases": true,
            "locale": true,
            "health": true,
            "storage": true,
            "teams": true,
            "users": true,
            "sites": true,
            "functions": true,
            "graphql": true,
            "messaging": true
        },
        "auth": {
            "methods": {
                "jwt": true,
                "phone": true,
                "invites": true,
                "anonymous": true,
                "email-otp": true,
                "magic-url": true,
                "email-password": true
            },
            "security": {
                "duration": 31536000,
                "limit": 0,
                "sessionsLimit": 10,
                "passwordHistory": 0,
                "passwordDictionary": false,
                "personalDataCheck": false,
                "sessionAlerts": false,
                "mockNumbers": []
            }
        }
    },
    "functions": [
        {
            "$id": "68dabd3a000fe5ce4525",
            "execute": [
                "any",
                "users"
            ],
            "name": "ImportCsvFunction",
            "enabled": true,
            "logging": true,
            "runtime": "node-16.0",
            "timeout": 3600,
            "path": "functions/ImportCsvFunction",
            "events": [],
            "schedule": "",
            "provider": "self",
            "entrypoint": "src/index.js",
            "ignore": [
                "node_modules",
                ".npm",
                ".env"
            ],
            "settings": {
                "env": [
                    "DATABASE_ID=68b1d7530028045d94d3",
                    "COLLECTION_ID=clientes"
                ]
            },
            "secrets": [
                "API_KEY=standard_1bcc494f6b62679a2333039f95b0008b7764362f105aa71972942fe17b73aade72978a1e0190e85779a292d38376206e451770a58764b95852df4a7570870ce835c4e03d299ea09b15d11a9af05dda3097c86c0f600173d5eba62e105a7a0d21a7d6a52c20614d174567d2a2d7e95dae23f05c423d571dc86e0f54389c191c00"
            ]
        },
        {
            "$id": "SupabaseMigrationFunction",
            "execute": [
                "admins"
            ], 
            "name": "SupabaseMigrationFunction",
            "enabled": false, 
            "logging": true,
            "runtime": "node-16.0",
            "timeout": 900, 
            "path": "functions/SupabaseMigrationFunction",
            "events": [],
            "schedule": "",
            "provider": "self",
            "entrypoint": "src/main.js",
            "ignore": [
                "node_modules",
                ".npm",
                ".env"
            ],
            "settings": {
                "env": [
                    "SUPABASE_URL=",
                    "SUPABASE_ANON_KEY=",
                    "APPWRITE_DATABASE_ID=68b1d7530028045d94d3"
                ]
            },
            "secrets": [
                "APPWRITE_API_KEY" 
            ]
        }
        
    ],
    "storage": [
        {
            "$id": "fotos_cliente",
            "$permissions": [
                "create(\"users\")",
                "read(\"users\")",
                "update(\"users\")",
                "delete(\"users\")"
            ],
            "fileSecurity": false,
            "name": "Fotos de Cliente",
            "enabled": true,
            "maximumFileSize": 10000000,
            "allowedFileExtensions": [
                "jpg",
                "jpeg",
                "png"
            ],
            "compression": "none",
            "encryption": false,
            "antivirus": false
        },
        {
            "$id": "documentos_firmados",
            "$permissions": [
                "create(\"users\")",
                "read(\"users\")",
                "update(\"users\")",
                "delete(\"users\")"
            ],
            "fileSecurity": false,
            "name": "Documentos Firmados",
            "enabled": true,
            "maximumFileSize": 10000000,
            "allowedFileExtensions": [
                "pdf"
            ],
            "compression": "none",
            "encryption": true,
            "antivirus": true
        },
        {
            "$id": "fotos_sesiones",
            "$permissions": [
                "create(\"users\")",
                "read(\"users\")",
                "update(\"users\")",
                "delete(\"users\")"
            ],
            "fileSecurity": false,
            "name": "Fotos de Sesiones",
            "enabled": true,
            "maximumFileSize": 25000000,
            "allowedFileExtensions": [],
            "compression": "zstd",
            "encryption": true,
            "antivirus": true
        }
    ],
    "sites": [
        {
            "$id": "68eea1960024e6d4cc0c",
            "$permissions": [],
            "name": "Wasap",
            "domain": ""
        }
    ],
    "tablesDB": [
        {
            "$id": "68b1d7530028045d94d3",
            "$permissions": [
                "read(\"any\")",
                "write(\"users\")"
            ],
            "name": "Lipoout DB",
            "enabled": true,
            "collections": [
                {
                    "$id": "articulos",
                    "$permissions": [
                        "read(\"any\")",
                        "write(\"users\")"
                    ],
                    "name": "Artículos",
                    "enabled": true,
                    "columns": [
                        {
                            "key": "nombre",
                            "type": "string",
                            "required": true,
                            "array": false,
                            "size": 255,
                            "default": null,
                            "encrypt": false
                        },
                        {
                            "key": "precio_publico",
                            "type": "float",
                            "required": false,
                            "array": false,
                            "default": null,
                            "encrypt": false
                        },
                        {
                            "key": "coste",
                            "type": "float",
                            "required": false,
                            "array": false,
                            "default": null,
                            "encrypt": false
                        },
                        
                        {
                            "key": "referencia_erp",
                            "type": "string",
                            "required": false,
                            "array": false,
                            "size": 100,
                            "default": null,
                            "encrypt": false
                        },
                        {
                            "key": "supplier_id",
                            "type": "relation",
                            "required": false,
                            "array": false,
                            "default": null,
                            "encrypt": false,
                            "relatedCollection": "proveedores", 
                            "type_relation": "one-to-many"
                        },
                        {
                            "key": "porcentaje_iva",
                            "type": "float",
                            "required": false,
                            "array": false,
                            "default": 21.0,
                            "encrypt": false
                        }
                        
                    ],
                    "indexes": [
                        {
                            "key": "idx_nombre",
                            "type": "key",
                            "attributes": [
                                "nombre"
                            ]
                        }
                    ]
                },
                {
                    "$id": "citas",
                    "$permissions": [
                        "read(\"any\")",
                        "write(\"users\")"
                    ],
                    "name": "Citas",
                    "enabled": true,
                    "columns": [
                        {
                            "key": "cliente_id",
                            "type": "relation",
                            "required": true,
                            "array": false,
                            "default": null,
                            "encrypt": false,
                            "relatedCollection": "clientes",
                            "type_relation": "one-to-many"
                        },
                        {
                            "key": "fecha_hora",
                            "type": "datetime",
                            "required": true,
                            "array": false,
                            "default": null,
                            "encrypt": false
                        },
                        {
                            "key": "articulo_servicio_id",
                            "type": "relation",
                            "required": false,
                            "array": false,
                            "default": null,
                            "encrypt": false,
                            "relatedCollection": "articulos",
                            "type_relation": "one-to-many"
                        },
                        {
                            "key": "notas",
                            "type": "string",
                            "required": false,
                            "array": false,
                            "size": 500,
                            "default": null,
                            "encrypt": false
                        }
                    ],
                    "indexes": []
                },
                {
                    "$id": "clientes",
                    "$permissions": [
                        "read(\"any\")",
                        "write(\"users\")"
                    ],
                    "name": "Clientes",
                    "enabled": true,
                    "columns": [
                        {
                            "key": "codcli",
                            "type": "string",
                            "required": true,
                            "array": false,
                            "size": 10,
                            "default": null,
                            "encrypt": false
                        },
                        {
                            "key": "nomcli",
                            "type": "string",
                            "required": true,
                            "array": false,
                            "size": 100,
                            "default": null,
                            "encrypt": false
                        },
                        {
                            "key": "ape1cli",
                            "type": "string",
                            "required": false,
                            "array": false,
                            "size": 100,
                            "default": null,
                            "encrypt": false
                        },
                        {
                            "key": "ape2cli",
                            "type": "string",
                            "required": false,
                            "array": false,
                            "size": 100,
                            "default": null,
                            "encrypt": false
                        },
                        {
                            "key": "nombre_completo",
                            "type": "string",
                            "required": true,
                            "array": false,
                            "size": 255,
                            "default": null,
                            "encrypt": false
                        },
                        {
                            "key": "dnicli",
                            "type": "string",
                            "required": false,
                            "array": false,
                            "size": 20,
                            "default": null,
                            "encrypt": false
                        },
                        {
                            "key": "email",
                            "type": "string",
                            "required": true,
                            "array": false,
                            "size": 100,
                            "default": null,
                            "encrypt": false
                        },
                        {
                            "key": "tel1cli",
                            "type": "string",
                            "required": false,
                            "array": false,
                            "size": 20,
                            "default": null,
                            "encrypt": false
                        },
                        {
                            "key": "tel2cli",
                            "type": "string",
                            "required": false,
                            "array": false,
                            "size": 20,
                            "default": null,
                            "encrypt": false
                        },
                        {
                            "key": "dircli",
                            "type": "string",
                            "required": false,
                            "array": false,
                            "size": 255,
                            "default": null,
                            "encrypt": false
                        },
                        {
                            "key": "codposcli",
                            "type": "string",
                            "required": false,
                            "array": false,
                            "size": 10,
                            "default": null,
                            "encrypt": false
                        },
                        {
                            "key": "pobcli",
                            "type": "string",
                            "required": false,
                            "array": false,
                            "size": 100,
                            "default": null,
                            "encrypt": false
                        },
                        {
                            "key": "procli",
                            "type": "string",
                            "required": false,
                            "array": false,
                            "size": 100,
                            "default": null,
                            "encrypt": false
                        },
                        {
                            "key": "fecnac",
                            "type": "datetime",
                            "required": false,
                            "array": false,
                            "default": null,
                            "encrypt": false
                        },
                        {
                            "key": "sexo",
                            "type": "string",
                            "required": false,
                            "array": false,
                            "size": 10,
                            "default": "Otro",
                            "encrypt": false
                        },
                        {
                            "key": "edad",
                            "type": "integer",
                            "required": false,
                            "array": false,
                            "default": null,
                            "encrypt": false
                        },
                        {
                            "key": "fecalta",
                            "type": "datetime",
                            "required": false,
                            "array": false,
                            "default": null,
                            "encrypt": false
                        },
                        {
                            "key": "enviar",
                            "type": "integer",
                            "required": true,
                            "array": false,
                            "default": 1,
                            "encrypt": false
                        },
                        {
                            "key": "facturacion",
                            "type": "integer",
                            "required": true,
                            "array": false,
                            "default": 0,
                            "encrypt": false
                        },
                        {
                            "key": "antecedentes_personales",
                            "type": "string",
                            "required": false,
                            "array": false,
                            "size": 5000,
                            "default": null,
                            "encrypt": false
                        },
                        {
                            "key": "importErrors",
                            "type": "string",
                            "required": false,
                            "array": true,
                            "size": 255,
                            "default": null,
                            "encrypt": false
                        },
                        {
                            "key": "intereses",
                            "type": "string",
                            "required": false,
                            "array": true,
                            "size": 255,
                            "default": null,
                            "encrypt": false
                        },
                        {
                            "key": "supabase_id",
                            "type": "string",
                            "required": false,
                            "array": false,
                            "size": 50,
                            "default": null,
                            "encrypt": false
                        },
                        {
                            "key": "persona_contacto",
                            "type": "string",
                            "required": false,
                            "array": false,
                            "size": 255,
                            "default": null,
                            "encrypt": false
                        },
                        {
                            "key": "condiciones_pago",
                            "type": "string",
                            "required": false,
                            "array": false,
                            "size": 100,
                            "default": null,
                            "encrypt": false
                        },
                        {
                            "key": "limite_credito",
                            "type": "float",
                            "required": false,
                            "array": false,
                            "default": 0.0,
                            "encrypt": false
                        },
                        {
                            "key": "iban",
                            "type": "string",
                            "required": false,
                            "array": false,
                            "size": 50,
                            "default": null,
                            "encrypt": false
                        },
                        {
                            "key": "re_porcentaje",
                            "type": "float",
                            "required": false,
                            "array": false,
                            "default": 0.0,
                            "encrypt": false
                        },
                        {
                            "key": "irpf_porcentaje",
                            "type": "float",
                            "required": false,
                            "array": false,
                            "default": 0.0,
                            "encrypt": false
                        },
                        {
                            "key": "intracomunitario",
                            "type": "boolean",
                            "required": false,
                            "array": false,
                            "default": false,
                            "encrypt": false
                        }
                        ],
                    "indexes":
                        {
                            "key": "idx_email",
                            "type": "key",
                            "attributes": [
                                "email"
                            ]
                        }
                                },
                {
                    "$id": "bonos_cliente",
                    "$permissions": [
                        "read(\"any\")",
                        "write(\"users\")"
                    ],
                    "name": "Bonos de Cliente",
                    "enabled": true,
                    "columns": [
                        {
                            "key": "cliente_id",
                            "type": "relation",
                            "required": true,
                            "array": false,
                            "default": null,
                            "encrypt": false,
                            "relatedCollection": "clientes",
                            "type_relation": "one-to-many"
                        },
                        {
                            "key": "articulo_id",
                            "type": "relation",
                            "required": true,
                            "array": false,
                            "default": null,
                            "encrypt": false,
                            "relatedCollection": "articulos",
                            "type_relation": "one-to-many"
                        },
                        {
                            "key": "sesiones_restantes",
                            "type": "integer",
                            "required": true,
                            "array": false,
                            "default": 0,
                            "encrypt": false
                        },
                        {
                            "key": "fecha_compra",
                            "type": "datetime",
                            "required": true,
                            "array": false,
                            "default": null,
                            "encrypt": false
                        }
                    ],
                    "indexes": []
                },
                {
                    "$id": "facturas",
                    "$permissions": [
                        "read(\"any\")",
                        "write(\"users\")"
                    ],
                    "name": "Facturas",
                    "enabled": true,
                    "columns": [
                        {
                            "key": "num_factura",
                            "type": "string",
                            "required": true,
                            "array": false,
                            "size": 50,
                            "default": null,
                            "encrypt": false
                        },
                        {
                            "key": "fecha_emision",
                            "type": "datetime",
                            "required": true,
                            "array": false,
                            "default": null,
                            "encrypt": false
                        },
                        {
                            "key": "cliente_id",
                            "type": "relation",
                            "required": true,
                            "array": false,
                            "default": null,
                            "encrypt": false,
                            "relatedCollection": "clientes",
                            "type_relation": "one-to-many"
                        },
                        {
                            "key": "metodo_pago_id",
                            "type": "relation",
                            "required": false,
                            "array": false,
                            "default": null,
                            "encrypt": false,
                            "relatedCollection": "metodos_pago", 
                            "type_relation": "one-to-one",
                            "relatedCollection": "metodos_pago" 
                        },
                        {
                            "key": "subtotal",
                            "type": "float",
                            "required": true,
                            "array": false,
                            "default": 0.0,
                            "encrypt": false
                        },
                        {
                            "key": "total_impuestos",
                            "type": "float",
                            "required": true,
                            "array": false,
                            "default": 0.0,
                            "encrypt": false
                        },
                        {
                            "key": "total_importe",
                            "type": "float",
                            "required": true,
                            "array": false,
                            "default": 0.0,
                            "encrypt": false
                        },
                        {
                            "key": "estado",
                            "type": "string",
                            "required": true,
                            "array": false,
                            "size": 50,
                            "default": "Pendiente",
                            "encrypt": false
                        }
                        
                    ],
                    "indexes": []
                },
                {
                    "$permissions": [
                        "read(\"any\")",
                        "write(\"users\")"
                    ],
                    "name": "Proveedores",
                    "enabled": true,
                    "columns": [
                        {
                            "key": "nombre",
                            "type": "string",
                            "required": true,
                            "array": false,
                            "size": 255,
                            "default": null,
                            "encrypt": false
                        },
                        {
                            "key": "tax_id",
                            "type": "string",
                            "required": false,
                            "array": false,
                            "size": 20,
                            "default": null,
                            "encrypt": false
                        },
                        {
                            "key": "email",
                            "type": "string",
                            "required": false,
                            "array": false,
                            "size": 100,
                            "default": null,
                            "encrypt": false
                        },
                        {
                            "key": "telefono",
                            "type": "string",
                            "required": false,
                            "array": false,
                            "size": 20,
                            "default": null,
                            "encrypt": false
                        }
                    ],
                    "indexes": []
                },
                {
                    "$id": "facturas_lineas",
                    "$permissions": [
                        "read(\"any\")",
                        "write(\"users\")"
                    ],
                    "name": "Líneas de Factura",
                    "enabled": true,
                    "columns": [
                        {
                            "key": "factura_id",
                            "type": "relation",
                            "required": true,
                            "array": false,
                            "default": null,
                            "encrypt": false,
                            "relatedCollection": "facturas",
                            "type_relation": "one-to-many"
                        },
                        {
                            "key": "articulo_id",
                            "type": "relation",
                            "required": true,
                            "array": false,
                            "default": null,
                            "encrypt": false,
                            "relatedCollection": "articulos",
                            "type_relation": "one-to-many"
                        },
                        {
                            "key": "cantidad",
                            "type": "float",
                            "required": true,
                            "array": false,
                            "default": 1.0,
                            "encrypt": false
                        },
                        {
                            "key": "precio_unitario",
                            "type": "float",
                            "required": true,
                            "array": false,
                            "default": 0.0,
                            "encrypt": false
                        },
                        {
                            "key": "porcentaje_iva",
                            "type": "float",
                            "required": true,
                            "array": false,
                            "default": 21.0,
                            "encrypt": false
                        }
                    ],
                    "indexes": []
                },
                {
                    "$id": "metodos_pago",
                    "$permissions": [
                        "read(\"any\")",
                        "write(\"users\")"
                    ],
                    "name": "Métodos de Pago",
                    "enabled": true,
                    "columns": [
                        {
                            "key": "nombre",
                            "type": "string",
                            "required": true,
                            "array": false,
                            "size": 100,
                            "default": null,
                            "encrypt": false
                        },
                        {
                            "key": "descripcion",
                            "type": "string",
                            "required": false,
                            "array": false,
                            "size": 255,
                            "default": null,
                            "encrypt": false
                        }
                    ],
                    "indexes": []
                },
                {
                    "$id": "presupuestos",
                    "$permissions": [
                        "read(\"any\")",
                        "write(\"users\")"
                    ],
                    "name": "Presupuestos",
                    "enabled": true,
                    "columns": [
                        {
                            "key": "num_presupuesto",
                            "type": "string",
                            "required": true,
                            "array": false,
                            "size": 50,
                            "default": null,
                            "encrypt": false
                        },
                        {
                            "key": "fecha_emision",
                            "type": "datetime",
                            "required": true,
                            "array": false,
                            "default": null,
                            "encrypt": false
                        },
                        {
                            "key": "cliente_id",
                            "type": "relation",
                            "required": true,
                            "array": false,
                            "default": null,
                            "encrypt": false,
                            "relatedCollection": "clientes",
                            "type_relation": "one-to-many"
                        },
                        {
                            "key": "total_importe",
                            "type": "float",
                            "required": true,
                            "array": false,
                            "default": 0.0,
                            "encrypt": false
                        },
                        {
                            "key": "estado",
                            "type": "string",
                            "required": true,
                            "array": false,
                            "size": 50,
                            "default": "Borrador",
                            "encrypt": false
                        }
                    ],
                    "indexes": []
                },
                {
                    "$id": "presupuestos_lineas",
                    "$permissions": [
                        "read(\"any\")",
                        "write(\"users\")"
                    ],
                    "name": "Líneas de Presupuesto",
                    "enabled": true,
                    "columns": [
                        {
                            "key": "presupuesto_id",
                            "type": "relation",
                            "required": true,
                            "array": false,
                            "default": null,
                            "encrypt": false,
                            "relatedCollection": "presupuestos",
                            "type_relation": "one-to-many"
                        },
                        {
                            "key": "articulo_id",
                            "type": "relation",
                            "required": true,
                            "array": false,
                            "default": null,
                            "encrypt": false,
                            "relatedCollection": "articulos",
                            "type_relation": "one-to-many"
                        },
                        {
                            "key": "cantidad",
                            "type": "float",
                            "required": true,
                            "array": false,
                            "default": 1.0,
                            "encrypt": false
                        },
                        {
                            "key": "precio_unitario",
                            "type": "float",
                            "required": true,
                            "array": false,
                            "default": 0.0,
                            "encrypt": false
                        }
                    ],
                    "indexes": []
                }
                
            ]
        }
}